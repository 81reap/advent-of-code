import { Context, Layer, Schema } from "effect";
import { InputSchema } from "@/InputParser";

const SampleInput = `.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;

// biome-ignore format: string spacing matters here
const ParsedSampleInput = Schema.decodeUnknown(InputSchema)([
  [".", ".", ".", ".", ".", ".", ".", "S", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", "^", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", "^", ".", "^", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", "^", ".", "^", ".", "^", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", "^", ".", "^", ".", ".", ".", "^", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", "^", ".", "^", ".", ".", ".", "^", ".", "^", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", "^", ".", ".", ".", "^", ".", ".", ".", ".", ".", "^", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", "^", ".", "^", ".", "^", ".", "^", ".", "^", ".", ".", ".", "^", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", ".", "."]
])

export class TestConstants extends Context.Tag("TestConstants")<
	TestConstants,
	{
		readonly SampleInput: typeof SampleInput;
		readonly ParsedSampleInput: typeof ParsedSampleInput;
	}
>() {
	static readonly layer = Layer.succeed(TestConstants, {
		SampleInput,
		ParsedSampleInput,
	});
}
